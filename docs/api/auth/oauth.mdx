---
title: "OAuth Authentication"
description: "OAuth 2.0 authentication with Google and GitHub"
api: "GET https://api.superbox.com/v1/auth/oauth/{provider}"
icon: "key"
---

## Supported Providers

<CardGroup cols={2}>
  <Card title="Google OAuth" icon="brands google">
    Sign in with Google account
  </Card>
  <Card title="GitHub OAuth" icon="brands github">
    Sign in with GitHub account
  </Card>
</CardGroup>

## OAuth Flow

<Steps>
  <Step title="Initiate OAuth">
    Redirect user to provider authorization URL
    
    ```
    GET /auth/oauth/google
    GET /auth/oauth/github
    ```
  </Step>

<Step title="User Authorization">User grants permissions on provider site</Step>

<Step title="Callback">
  Provider redirects to callback URL with code ```
  https://superbox.com/auth/callback?code=abc123&state=xyz ```
</Step>

  <Step title="Token Exchange">
    Backend exchanges code for user data and creates session
  </Step>
</Steps>

## Google OAuth

### Initiate Authorization

<CodeGroup>
```bash cURL
curl https://api.superbox.com/v1/auth/oauth/google
```

```javascript JavaScript
window.location.href = "https://api.superbox.com/v1/auth/oauth/google";
```

```python Python
import requests

response = requests.get('https://api.superbox.com/v1/auth/oauth/google')
# Redirect user to response.url
```

</CodeGroup>

### Query Parameters

<ParamField query="redirect_uri" type="string">
  Callback URL after authorization Default: `https://superbox.com/auth/callback`
</ParamField>

<ParamField query="state" type="string">
  CSRF protection state parameter
</ParamField>

## GitHub OAuth

### Initiate Authorization

```
GET /auth/oauth/github?redirect_uri=https://yourapp.com/callback
```

### Requested Scopes

- `user:email` - Access user email
- `read:user` - Read user profile

## Callback Handling

### Success Response

```json
{
  "user": {
    "id": "usr_1234567890",
    "email": "john@example.com",
    "username": "johndoe",
    "avatar_url": "https://avatars.githubusercontent.com/u/12345",
    "oauth_provider": "github",
    "oauth_id": "12345"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refresh_token": "rt_abcdef123456..."
}
```

### Error Responses

<CodeGroup>
```json 400 - Missing Code
{
  "error": "Missing authorization code",
  "message": "No code provided in callback"
}
```

```json 401 - OAuth Error
{
  "error": "OAuth authentication failed",
  "message": "Failed to exchange code for token",
  "provider": "google"
}
```

</CodeGroup>

## Frontend Integration

<CodeGroup>
```javascript React
function GoogleLogin() {
  const handleLogin = () => {
    const width = 500;
    const height = 600;
    const left = window.screen.width / 2 - width / 2;
    const top = window.screen.height / 2 - height / 2;
    
    const popup = window.open(
      'https://api.superbox.com/v1/auth/oauth/google',
      'Google Login',
      `width=${width},height=${height},left=${left},top=${top}`
    );
    
    // Listen for callback
    window.addEventListener('message', (event) => {
      if (event.data.type === 'oauth_success') {
        const { token, user } = event.data;
        // Store token and update UI
      }
    });
  };
  
  return (
    <button onClick={handleLogin}>
      Sign in with Google
    </button>
  );
}
```

```javascript Next.js
// pages/api/auth/callback.js
export default async function handler(req, res) {
  const { code, state } = req.query;

  // Exchange code for token
  const response = await fetch(
    "https://api.superbox.com/v1/auth/oauth/callback",
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ code, state }),
    },
  );

  const { token, user } = await response.json();

  // Set secure cookie
  res.setHeader("Set-Cookie", `token=${token}; HttpOnly; Secure; Path=/`);
  res.redirect("/dashboard");
}
```

</CodeGroup>
